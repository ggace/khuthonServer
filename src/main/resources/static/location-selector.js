// location-selector.js

const METROPOLITAN_CITIES_GROUP_NAME = "광역시";

// 광역시 데이터
const METROPOLITAN_CITIES_DATA = {
    "서울특별시": {
        "강남구": ["개포동", "논현동", "대치동", "도곡동", "삼성동", "세곡동", "수서동", "신사동", "압구정동", "역삼동", "율현동", "일원동", "자곡동", "청담동"],
        "강동구": ["강일동", "고덕동", "길동", "둔촌동", "명일동", "상일동", "성내동", "암사동", "천호동"],
        "관악구": ["낙성대동", "난곡동", "난향동", "남현동", "대학동", "미성동", "보라매동", "삼성동", "서림동", "서원동", "성현동", "신림동", "신사동", "신원동", "은천동", "인헌동", "조원동", "중앙동", "청룡동", "청림동", "행운동"],
        "종로구": ["가회동", "교남동", "무악동", "부암동", "사직동", "삼청동", "숭인동", "이화동", "종로1·2·3·4가동", "종로5·6가동", "창신동", "청운효자동", "평창동", "혜화동"]
        // 다른 서울시 구 및 동 추가 가능
    },
    "부산광역시": {
        "해운대구": ["반송동", "반여동", "석대동", "송정동", "우동", "재송동", "좌동", "중동"],
        "부산진구": ["가야동", "개금동", "당감동", "범전동", "범천동", "부암동", "부전동", "양정동", "연지동", "전포동", "초읍동"],
        "수영구": ["광안동", "남천동", "망미동", "민락동", "수영동"],
        "동래구": ["낙민동", "명륜동", "명장동", "복산동", "사직동", "수안동", "안락동", "온천동", "칠산동"]
        // 다른 부산시 구 및 동 추가 가능
    },
    "대구광역시": {
        "수성구": ["고산1동", "고산2동", "고산3동", "두산동", "만촌1동", "범물1동", "범어1동", "상동", "수성1가동", "지산1동"],
        "달서구": ["감삼동", "두류동", "본리동", "상인1동", "성당동", "송현1동", "월성1동", "이곡1동", "죽전동", "진천동"],
        "중구": ["남산1동", "대신동", "동인동", "삼덕동", "성내1동"]
        // 다른 대구시 구 및 동 추가 가능
    },
    "인천광역시": {
        "남동구": ["간석1동", "구월1동", "남촌도림동", "논현1동", "만수1동", "장수서창동"],
        "부평구": ["부평1동", "산곡1동", "십정1동", "일신동", "청천1동"],
        "서구": ["검단동", "석남1동", "신현원창동", "연희동", "청라1동"],
        "연수구": ["동춘1동", "선학동", "송도1동", "연수1동", "옥련1동"]
        // 다른 인천시 구 및 동 추가 가능
    },
    "광주광역시": {
        "북구": ["건국동", "두암1동", "매곡동", "문흥1동", "삼각동", "오치1동", "용봉동", "운암1동", "일곡동", "중흥1동"],
        "서구": ["광천동", "금호1동", "농성1동", "동천동", "상무1동", "양동", "치평동", "풍암동", "화정1동"],
        "광산구": ["도산동", "송정1동", "수완동", "신가동", "신창동", "첨단1동", "하남동", "월곡1동", "운남동", "어룡동"]
        // 다른 광주시 구 및 동 추가 가능
    },
    "대전광역시": {
        "서구": ["가수원동", "갈마1동", "관저1동", "괴정동", "도마1동", "둔산1동", "만년동", "용문동", "월평1동", "탄방동"],
        "유성구": ["노은1동", "상대동", "신성동", "온천1동", "원신흥동", "전민동", "진잠동", "학하동"],
        "중구": ["대흥동", "목동", "문창동", "은행선화동", "중촌동"]
        // 다른 대전시 구 및 동 추가 가능
    },
    "울산광역시": {
        "남구": ["달동", "대현동", "삼산동", "선암동", "수암동", "신정1동", "야음장생포동", "옥동"],
        "중구": ["다운동", "반구1동", "병영1동", "복산1동", "성안동", "중앙동", "학성동"],
        "북구": ["강동동", "농소1동", "양정동", "염포동", "효문동"]
        // 다른 울산시 구 및 동 추가 가능
    }
};

// 도 및 세종시 데이터
const PROVINCES_AND_SEJONG_DATA = {
    "경기도": {
        "수원시 장안구": ["파장동", "정자1동", "정자2동", "정자3동", "영화동", "송죽동", "조원1동", "조원2동", "연무동", "이목동", "율천동"],
        "수원시 권선구": ["세류1동", "세류2동", "세류3동", "평동", "서둔동", "구운동", "금곡동", "호매실동", "권선1동", "권선2동", "곡선동", "입북동"],
        "성남시 분당구": ["분당동", "수내1동", "수내2동", "수내3동", "정자1동", "정자2동", "정자3동", "서현1동", "서현2동", "이매1동", "이매2동", "야탑1동", "야탑2동", "야탑3동", "판교동", "삼평동", "백현동", "금곡동", "구미1동", "운중동"],
        "용인시 처인구": ["중앙동", "역삼동", "유림동", "동부동", "포곡읍", "모현읍", "백암면", "양지면", "원삼면"],
        "고양시 일산동구": ["식사동", "중산1동", "중산2동", "정발산동", "풍산동", "백석1동", "백석2동", "마두1동", "마두2동", "장항1동", "장항2동", "고봉동"],
        "부천시": ["원미1동", "원미2동", "소사동", "역곡1동", "역곡2동", "춘의동", "도당동", "약대동", "심곡1동", "심곡2동", "심곡3동", "오정동", "성곡동"],
        "화성시": ["남양읍", "향남읍", "동탄1동", "동탄2동", "봉담읍", "우정읍", "매송면", "진안동", "병점1동"],
        "오산시": ["중앙동", "대원동", "남촌동", "신장동", "세마동", "초평동", "궐동", "금암동", "수청동", "누읍동"]
    },
    "강원특별자치도": {
        "춘천시": ["교동", "조운동", "약사명동", "근화동", "소양동", "후평1동", "효자1동", "석사동", "퇴계동", "강남동", "신북읍", "동면", "동산면"],
        "원주시": ["중앙동", "원인동", "개운동", "명륜1동", "단구동", "일산동", "학성동", "단계동", "무실동", "반곡관설동", "문막읍", "소초면"],
        "강릉시": ["홍제동", "중앙동", "옥천동", "교1동", "교2동", "포남1동", "포남2동", "성덕동", "경포동", "주문진읍", "옥계면"]
    },
    "충청북도": {
        "청주시 상당구": ["중앙동", "성안동", "탑대성동", "영운동", "금천동", "용담명암산성동", "용암1동", "용암2동"],
        "청주시 서원구": ["사직1동", "사창동", "모충동", "분평동", "산남동", "수곡1동", "성안동", "남이면", "현도면"],
        "충주시": ["주덕읍", "살미면", "수안보면", "성내충인동", "교현안림동", "교현2동", "용산동", "지현동", "문화동", "호암직동", "달천동"],
        "제천시": ["교동", "중앙동", "남현동", "영서동", "용두동", "신백동", "청전동", "화산동", "봉양읍", "금성면", "백운면"]
    },
    "충청남도": {
        "천안시 동남구": ["중앙동", "일봉동", "신안동", "문성동", "원성1동", "봉명동", "청룡동", "목천읍", "광덕면"],
        "천안시 서북구": ["성정1동", "쌍용1동", "백석동", "부성1동", "직산읍", "성환읍", "입장면"],
        "공주시": ["중학동", "웅진동", "옥룡동", "신관동", "월송동", "유구읍", "이인면", "탄천면"],
        "아산시": ["온양1동", "온양2동", "온양3동", "배방읍", "염치읍", "탕정면", "음봉면", "송악면"],
        "논산시": ["취암동", "부창동", "강경읍", "연무읍", "성동면", "광석면"]
    },
    "전북특별자치도": {
        "전주시 완산구": ["중앙동", "풍남동", "노송동", "완산동", "동서학동", "서서학동", "중화산1동", "평화1동", "삼천1동", "효자1동"],
        "전주시 덕진구": ["진북동", "인후1동", "덕진동", "금암1동", "팔복동", "송천1동", "조촌동", "여의동", "혁신동"],
        "익산시": ["중앙동", "평화동", "남중동", "모현동", "송학동", "영등1동", "삼성동", "함열읍", "오산면", "황등면"],
        "군산시": ["해신동", "월명동", "삼학동", "중앙동", "흥남동", "조촌동", "경암동", "구암동", "수송동", "나운1동", "옥구읍", "회현면"]
    },
    "전라남도": {
        "목포시": ["용당1동", "산정동", "연산동", "원산동", "대성동", "북항동", "하당동", "신흥동", "삼학동", "이로동", "부흥동"],
        "여수시": ["동문동", "한려동", "중앙동", "충무동", "광림동", "서강동", "대교동", "국동", "월호동", "여서동", "문수동", "미평동", "둔덕동", "만덕동", "삼일동", "묘도동", "돌산읍", "소라면", "율촌면", "화양면", "남면", "화정면", "삼산면"],
        "순천시": ["향동", "매곡동", "삼산동", "조곡동", "덕연동", "풍덕동", "남제동", "저전동", "장천동", "중앙동", "도사동", "왕조1동", "왕조2동", "승주읍", "해룡면", "서면", "황전면"],
        "나주시": ["송월동", "영강동", "금남동", "성북동", "영산동", "이창동", "남평읍", "세지면", "왕곡면", "반남면", "공산면", "동강면"]
    },
    "경상북도": {
        "포항시 남구": ["해도동", "상대동", "효곡동", "대이동", "송도동", "청림동", "제철동", "오천읍", "구룡포읍", "동해면"],
        "포항시 북구": ["중앙동", "양학동", "죽도동", "용흥동", "우창동", "환여동", "흥해읍", "신광면", "청하면", "송라면"],
        "구미시": ["선주원남동", "도량동", "지산동", "송정동", "원평1동", "형곡1동", "신평1동", "공단1동", "광평동", "상모사곡동", "임오동", "인동동", "진미동", "양포동", "선산읍", "고아읍", "무을면"],
        "경주시": ["중부동", "황오동", "성건동", "황남동", "월성동", "선도동", "용강동", "황성동", "현곡면", "안강읍", "건천읍", "외동읍", "양북면"]
    },
    "경상남도": {
        "창원시 의창구": ["동읍", "북면", "대산면", "의창동", "팔룡동", "명곡동", "봉림동", "용지동"],
        "창원시 성산구": ["반송동", "중앙동", "상남동", "사파동", "가음정동", "성주동", "웅남동"],
        "김해시": ["동상동", "회현동", "부원동", "내외동", "북부동", "칠산서부동", "활천동", "삼안동", "불암동", "진영읍", "주촌면", "한림면", "장유1동"],
        "진주시": ["천전동", "성북동", "중앙동", "상봉동", "상대1동", "하대1동", "초장동", "평거동", "신안동", "판문동", "문산읍", "내동면", "집현면"],
        "양산시": ["중앙동", "양주동", "삼성동", "서창동", "소주동", "평산동", "덕계동", "물금읍", "동면", "원동면", "상북면", "하북면"]
    },
    "제주특별자치도": {
        "제주시": ["일도1동", "일도2동", "이도1동", "이도2동", "삼도1동", "삼도2동", "용담1동", "용담2동", "건입동", "화북동", "삼양동", "봉개동", "아라동", "오라동", "연동", "노형동", "외도동", "이호동", "도두동", "한림읍", "애월읍", "구좌읍", "조천읍", "한경면", "추자면", "우도면"],
        "서귀포시": ["송산동", "정방동", "중앙동", "천지동", "효돈동", "영천동", "동홍동", "서홍동", "대륜동", "대천동", "중문동", "예래동", "대정읍", "남원읍", "성산읍", "안덕면", "표선면"]
    },
    "세종특별자치시": { // 세종시는 도 레벨에서 바로 시/군/구(세종특별자치시) -> 읍/면/동으로 연결
        "세종특별자치시": ["한솔동", "도담동", "아름동", "종촌동", "고운동", "새롬동", "대평동", "보람동", "소담동", "다정동", "해밀동", "반곡동", "조치원읍", "연기면", "금남면", "장군면", "부강면", "연서면", "전의면", "전동면", "소정면"]
    }
};

document.addEventListener('DOMContentLoaded', () => {
    const provinceSelect = document.getElementById('province-select');
    const citySelect = document.getElementById('city-select');
    const districtSelect = document.getElementById('district-select');

    function populateProvinces() {
        provinceSelect.options.length = 1; // 기본 "도 선택" 옵션만 남김
        const metropolitanOption = new Option(METROPOLITAN_CITIES_GROUP_NAME, METROPOLITAN_CITIES_GROUP_NAME);
        provinceSelect.add(metropolitanOption);
        for (const provinceName in PROVINCES_AND_SEJONG_DATA) {
            const option = new Option(provinceName, provinceName);
            provinceSelect.add(option);
        }
    }

    function populateCities(selectedFirstDropdownValue) {
        citySelect.options.length = 1; 
        districtSelect.options.length = 1; 

        if (selectedFirstDropdownValue === METROPOLITAN_CITIES_GROUP_NAME) {
            for (const metropolitanCityName in METROPOLITAN_CITIES_DATA) {
                const gus = METROPOLITAN_CITIES_DATA[metropolitanCityName];
                for (const guName in gus) {
                    const optionText = `${metropolitanCityName} ${guName}`; // 예: "부산광역시 해운대구"
                    const optionValue = `${metropolitanCityName}|${guName}`;    // 값은 구분자로 결합: "부산광역시|해운대구"
                    const option = new Option(optionText, optionValue);
                    citySelect.add(option);
                }
            }
        } else if (PROVINCES_AND_SEJONG_DATA[selectedFirstDropdownValue]) {
            const citiesOrGus = PROVINCES_AND_SEJONG_DATA[selectedFirstDropdownValue];
            for (const cityOrGuName in citiesOrGus) {
                const option = new Option(cityOrGuName, cityOrGuName);
                citySelect.add(option);
            }
        }
    }

    function populateDistricts(selectedFirstDropdownValue, selectedSecondDropdownValue) {
        districtSelect.options.length = 1; 

        if (selectedFirstDropdownValue === METROPOLITAN_CITIES_GROUP_NAME) {
            // selectedSecondDropdownValue는 "부산광역시|해운대구"와 같은 형태
            if (selectedSecondDropdownValue && selectedSecondDropdownValue.includes('|')) {
                const [metroCity, gu] = selectedSecondDropdownValue.split('|');
                if (METROPOLITAN_CITIES_DATA[metroCity] && METROPOLITAN_CITIES_DATA[metroCity][gu]) {
                    const dongs = METROPOLITAN_CITIES_DATA[metroCity][gu];
                    if (Array.isArray(dongs)) {
                        dongs.forEach(dong => {
                            const option = new Option(dong, dong);
                            districtSelect.add(option);
                        });
                    }
                }
            }
        } else if (PROVINCES_AND_SEJONG_DATA[selectedFirstDropdownValue] && 
                   PROVINCES_AND_SEJONG_DATA[selectedFirstDropdownValue][selectedSecondDropdownValue]) {
            const dongs = PROVINCES_AND_SEJONG_DATA[selectedFirstDropdownValue][selectedSecondDropdownValue];
            if (Array.isArray(dongs)) {
                dongs.forEach(dong => {
                    const option = new Option(dong, dong);
                    districtSelect.add(option);
                });
            }
        }
    }

    provinceSelect.addEventListener('change', (event) => {
        populateCities(event.target.value);
    });

    citySelect.addEventListener('change', (event) => {
        populateDistricts(provinceSelect.value, event.target.value);
    });

    populateProvinces();
}); 